## Таблица User

Таблица пользователей содержит информацию о пользователях (емейл, имя, пароль, аватар).

Relation User:
{email} -> username, password, avatar_url;


{user_id} -> email;

- **1NF**: Все значения в столбцах являются атомарными. Каждый столбец (email, username, password, avatar_url) содержит только одно значение, что исключает множественные значения в ячейках. Нет повторяющихся строк, так как email и user_id являются уникальными.
- **2NF**: Таблица находится в 1NF. Все неключевые атрибуты (username, password, avatar_url) полностью зависят от каждого потенциального ключа (email и user_id)
- **3NF**: Таблица находится в 2NF. Нет транзитивных зависимостей. Например, username не зависит от password, а password не зависит от avatar_url.
- **BCNF**: Все детерминанты являются потенциальными ключами. В данном случае, email и user_id - единственные детерминанты, и оба являются потенциальными ключами.

В данной таблице содержится информация о пользователях (емейл, имя, пароль, аватар).
При регистрации в таблице создается запись, при изменении настроек изменяются поля.
Все поля кроме аватара являются обязательно ненулевыми, так как это необходимая информация для пользователя.
Аватар может быть загружен по желанию. Почта является альтернативным ключом, так как она уникальна

## Таблица Email_message

Таблица сообщений содержит информацию о сообщениях (id, id родителя, id отправителя, id получателя, тема, описание, дата отправки, статус сообщения)

Relation Email_message:
{email_id} -> email_parent_id, sender_id, recipient_id, title, description, date, isRead, folder_id


- **1NF**: Все значения в столбцах атомарные (sender_id, recipient_id, title, description, date, isRead, folder_id не содержат множественных значений). Нет повторяющихся строк, так как email_id является уникальным.
- **2NF**: Таблица находится в 1NF. Все неключевые атрибуты зависят от первичного ключа (email_id). Например, title и description зависят от email_id.
- **3NF**: Таблица находится в 2NF. Нет транзитивных зависимостей. Все неключевые атрибуты напрямую зависят от email_id.Например, title не зависит от sender_id, а description не зависит от date.
- **BCNF**: Единственный детерминант email_id является первичным ключом.

В данной таблице содержится информация о сообщениях (id, id родителя, id отправителя, id получателя, тема, описание, дата отправки, статус сообщения). При отправке сообщения в таблицу добавляется запись. Система может отслеживать статус прочтения сообщений. Сообщения могут быть отсортированы по папкам для удобства пользователей. Эта структура позволяет реализовать основные функции почтового клиента: отправку, получение, чтение, ответ и пересылку сообщений

## Таблица Csrf_token

Таблица csrf_token содержит информацию о csrf токенах (id, id пользователя, хеш, дата истечения).

Relation Csrf_token:
{csrf_id} -> user_id, hash, expire_date
- **1NF**: Все значения в столбцах атомарные (например, hash не содержит множественных значений). Нет повторяющихся строк, так как csrf_id является уникальным.
- **2NF**: Таблица находится в 1NF. Все неключевые атрибуты (user_id, hash, expire_date) зависят от первичного ключа (csrf_id) полностью, без частичных зависимостей.
- **3NF**: Таблица находится в 2NF. Нет транзитивных зависимостей. Все неключевые атрибуты напрямую зависят от csrf_id.
- **BCNF**: Единственный детерминант csrf_id является первичным ключом.

Таблица csrf_token содержит информацию о csrf токенах (id, id пользователя, хеш, дата истечения). При каждом входе пользователя в систему или при выполнении важных операций генерируется новый CSRF токен. Токен привязывается к конкретному пользователю и сессии. Перед обработкой запроса система проверяет наличие и валидность CSRF токена. Токены имеют ограниченный срок действия для повышения безопасности. Истекшие токены автоматически удаляются из базы данных.

## Таблица Session

Таблица session содержит информацию о сессиях (id, id пользователя, хеш, дата истечения).

Relation Session:
{session_id} -> user_id, hash, expire_date
- **1NF**: Все атрибуты атомарны: session_id, user_id, hash, expire_date содержат только одно значение. Нет повторяющихся строк, так как session_id является уникальным.
- **2NF**: Таблица находится в 1NF. Все неключевые атрибуты зависят от первичного ключа (session_id). Например, hash и expire_date зависят от session_id.
- **3NF**: Таблица находится в 2NF. Нет транзитивных зависимостей. Все неключевые атрибуты напрямую зависят от session_id.
- **BCNF**: Единственный детерминант session_id является первичным ключом. 

Таблица session содержит информацию о сессиях (id, id пользователя, хеш, дата истечения). При входе пользователя в систему генерируется новая сессия. Сессия привязывается к конкретному пользователю. Перед обработкой запроса система проверяет наличие и валидность сессии. Сессия имеет ограниченный срок действия для повышения безопасности. Истекшие сессии автоматически удаляются из базы данных.
