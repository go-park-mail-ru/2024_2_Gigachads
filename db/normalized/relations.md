## Таблица profile

Таблица пользователей содержит информацию о пользователях (id, email, username, password, avatar_url).

Relation User:
{email} -> username, password, avatar_url;
{id} -> email;

- **1NF**: Все значения в столбцах являются атомарными. Каждый столбец (email, username, password, avatar_url) содержит только одно значение, что исключает множественные значения в ячейках. Нет повторяющихся строк, так как email и user_id являются уникальными.
- **2NF**: Таблица находится в 1NF. Все неключевые атрибуты (username, password, avatar_url) полностью зависят от каждого потенциального ключа (email и id)
- **3NF**: Таблица находится в 2NF. Нет транзитивных зависимостей. Например, username не зависит от password, а password не зависит от avatar_url.
- **BCNF**: Все детерминанты являются потенциальными ключами. В данном случае, email и id - единственные детерминанты, и оба являются потенциальными ключами.

В данной таблице содержится информация о пользователях (email, username, password, avatar_url).
При регистрации в таблице создается запись, при изменении настроек изменяются поля.
Все поля кроме avatar_url являются обязательно ненулевыми, так как это необходимая информация для пользователя.
Аватар может быть загружен по желанию. email является альтернативным ключом, так как он уникален.

## Таблица message

Таблица сообщений содержит информацию о сообщениях (id, title, description)

Relation message:
{id} -> title, description

- **1NF**: Все значения в столбцах атомарные (title, description не содержат множественных значений). Нет повторяющихся строк, так как id является уникальным.
- **2NF**: Таблица находится в 1NF. Все неключевые атрибуты зависят от первичного ключа (id). title и description зависят от id.
- **3NF**: Таблица находится в 2NF. Нет транзитивных зависимостей. Все неключевые атрибуты напрямую зависят от id. Например, title не зависит от description.
- **BCNF**: Единственный детерминант id является первичным ключом.

В данной таблице содержится информация о сообщениях (id, title, description).

## Таблица email_transaction

Таблица сообщений содержит информацию о транзакциях сообщений (id, parent_transaction_id, sender_email, recipient_email, message_id, sending_date, isRead, folder_id)

Relation email_transaction:
{id} -> parent_transaction_id, sender_email, recipient_email, message_id, sending_date, isRead, folder_id

- **1NF**: Все значения в столбцах атомарные (parent_transaction_id, sender_email, recipient_email, message_id, sending_date, isRead, folder_id не содержат множественных значений). Нет повторяющихся строк, так как id является уникальным.
- **2NF**: Таблица находится в 1NF. Все неключевые атрибуты зависят от первичного ключа (id). Например, parent_transaction_id и sender_email зависят от id.
- **3NF**: Таблица находится в 2NF. Нет транзитивных зависимостей. Все неключевые атрибуты напрямую зависят от id. Например, parent_transaction_id не зависит от sender_email, а message_id не зависит от sending_date.
- **BCNF**: Единственный детерминант id является первичным ключом.

В данной таблице содержится информация о транзакциях сообщений (id, parent_transaction_id, sender_email, recipient_email, message_id, sending_date, isRead, folder_id). При отправке сообщения в таблицу добавляется запись. Система может отслеживать статус прочтения сообщений. Сообщения могут быть отсортированы по папкам для удобства пользователей. Эта структура позволяет реализовать основные функции почтового клиента: отправку, получение, чтение, ответ и пересылку сообщений.

## Таблица folder

Таблица сообщений содержит информацию о папках (id, user_id, name)

Relation folder:
{id} -> user_id, name

- **1NF**: Все значения в столбцах атомарные (user_id, name не содержат множественных значений). Нет повторяющихся строк, так как id является уникальным.
- **2NF**: Таблица находится в 1NF. Все неключевые атрибуты зависят от первичного ключа (id). Например, user_id и name зависят от id.
- **3NF**: Таблица находится в 2NF. Нет транзитивных зависимостей. Все неключевые атрибуты напрямую зависят от id. Например, user_id не зависит от name.
- **BCNF**: Единственный детерминант id является первичным ключом.

В данной таблице содержится информация о папках (id, user_id, name).

## Таблица attachment

Таблица сообщений содержит информацию о папках (id, message_id, url)

Relation attachment:
{id} -> message_id, url

- **1NF**: Все значения в столбцах атомарные (message_id, url не содержат множественных значений). Нет повторяющихся строк, так как id является уникальным.
- **2NF**: Таблица находится в 1NF. Все неключевые атрибуты зависят от первичного ключа (id). Например, message_id и url зависят от id.
- **3NF**: Таблица находится в 2NF. Нет транзитивных зависимостей. Все неключевые атрибуты напрямую зависят от id. Например, message_id не зависит от url.
- **BCNF**: Единственный детерминант id является первичным ключом.

В данной таблице содержится информация о вложениях (id, message_id, url). При добавлении вложения(картинки) в письмо в таблицу делается запись.

## Таблица Csrf_token

Таблица csrf_token содержит информацию о csrf токенах (id, user_id, hash, expire_date).

Relation Csrf_token:
{id} -> user_id, hash, expire_date
- **1NF**: Все значения в столбцах атомарные (например, hash не содержит множественных значений). Нет повторяющихся строк, так как id является уникальным.
- **2NF**: Таблица находится в 1NF. Все неключевые атрибуты (user_id, hash, expire_date) зависят от первичного ключа (id) полностью, без частичных зависимостей.
- **3NF**: Таблица находится в 2NF. Нет транзитивных зависимостей. Все неключевые атрибуты напрямую зависят от id.
- **BCNF**: Единственный детерминант id является первичным ключом.

Таблица csrf_token содержит информацию о csrf токенах (id, user_id, hash, expire_date). При каждом входе пользователя в систему или при выполнении важных операций генерируется новый CSRF токен. Токен привязывается к конкретному пользователю и сессии. Перед обработкой запроса система проверяет наличие и валидность CSRF токена. Токены имеют ограниченный срок действия для повышения безопасности. Истекшие токены автоматически удаляются из базы данных.

## Таблица Session

Таблица session содержит информацию о сессиях (id, user_id, hash, expire_date).

Relation Session:
{id} -> user_id, hash, expire_date
- **1NF**: Все атрибуты атомарны: id, user_id, hash, expire_date содержат только одно значение. Нет повторяющихся строк, так как id является уникальным.
- **2NF**: Таблица находится в 1NF. Все неключевые атрибуты зависят от первичного ключа (id). Например, hash и expire_date зависят от id.
- **3NF**: Таблица находится в 2NF. Нет транзитивных зависимостей. Все неключевые атрибуты напрямую зависят от session_id.
- **BCNF**: Единственный детерминант id является первичным ключом. 

Таблица session содержит информацию о сессиях (id, user_id, hash, expire_date). При входе пользователя в систему генерируется новая сессия. Сессия привязывается к конкретному пользователю. Перед обработкой запроса система проверяет наличие и валидность сессии. Сессия имеет ограниченный срок действия для повышения безопасности. Истекшие сессии автоматически удаляются из базы данных.
